!function e(t,a,n){function r(i,o){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var p=a[i]={exports:{}};t[i][0].call(p.exports,function(e){var a=t[i][1][e];return r(a?a:e)},p,p.exports,e,t,a,n)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e){(function(t){function a(e){return h[e]?JSON.parse(JSON.stringify(h[e])):{}}function n(e,t){return h[e]&&h[e][t]?JSON.parse(JSON.stringify(h[e][t])):{}}function r(e){return d[e]||{}}t.React=e("react");var s=e("fastclick"),i=e("react-router"),o=i.Router,c=i.Route,p=i.Link,l=e("./pages/user"),u=e("./pages/run"),d={hendrik:e("./profile.json")},h={hendrik:{0:e("./data/1.json"),1:e("./data/3.json"),2:e("./data/4.json"),3:e("./data/5.json"),4:e("./data/6.json"),5:e("./data/7.json"),6:e("./data/8.json"),7:e("./data/9.json")}},m=React.createClass({displayName:"App",render:function(){return React.DOM.div(null,p({to:"index"},"Index"),p({to:"user",entity:"hendrik"},"User"),p({to:"run",entity:"hendrik",id:1},"Run"),React.DOM.div({className:"container"},this.props.activeRoute))}}),f=React.createClass({displayName:"Index",render:function(){return React.DOM.h1(null,"Index")}});s(document.body),React.initializeTouchEvents(!0);var g=o(c({handler:m},c({name:"index",path:"/",handler:f}),c({name:"user",path:"/:entity",handler:l,getRuns:a,getProfile:r}),c({name:"run",path:"/:entity/:id",handler:u,getRun:n,getProfile:r})));g.renderComponent(document.body)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./data/1.json":"6vqv86","./data/3.json":"bzds3I","./data/4.json":"LlFgBs","./data/5.json":"Oa5//7","./data/6.json":"UDSZJw","./data/7.json":"fhNAE9","./data/8.json":"AQ+Wca","./data/9.json":"0sFj1U","./pages/run":9,"./pages/user":10,"./profile.json":11,fastclick:"c2NsPU",react:"M6d2gk","react-router":"JvhVGi"}],2:[function(e,t){var a=e("react"),n=e("moment"),r=e("react-router").Router;t.exports=a.createClass({displayName:"calendar",propTypes:{data:a.PropTypes.object.isRequired},wlz:function(e){var t=e.toString();return t.length<2?"0"+t:t},activitiesInWeek:function(e,t){return e.reduce(function(e,a){return a.week==t&&e.push(a),e},[])},render:function(){for(var e=Object.keys(this.props.data).map(function(e){var t=this.props.data[e];return t.id=e,t.date=n(t.startTime),t.week=Number(t.date.year()+""+this.wlz(t.date.isoWeek())),t},this),t=e.reduce(function(e,t){return-1===e.indexOf(t.week)&&e.push(t.week),e},[]).sort(function(e,t){return t-e}),r={},c=[],p=0;p<t.length;p++){var l=!1,u=t[p];t[p-1]-u>1&&(c.push(o({key:u+"-fold"})),l=!0);var d=n(u,"YYYYWW");if(d.month()!==r.month||d.year()!==r.year){r={month:d.month(),year:d.year()};var h=d.format("MMMM YYYY");c.push(a.DOM.div({key:h,className:"calendar__week-header"},a.DOM.h2(null,h))),l=!0}for(var m=this.activitiesInWeek(e,u),f=m.reduce(function(e,t){return e[t.date.isoWeekday()]=t,e},{}),g=[],v=1;8>v;v++){var y=f[v]||{date:n(v+"-"+u,"E-YYYYWW")};g.push(s({key:v+"-"+u,date:y.date,entity:this.props.entity,id:y.id}))}c.push(i({key:u,afterHeader:l},g))}return a.DOM.div({className:this.props.className},c)}});var s=a.createClass({displayName:"Day",propTypes:{date:a.PropTypes.object,entity:a.PropTypes.string,id:a.PropTypes.string},onClick:function(){this.props.id&&r.transitionTo("run",{entity:this.props.entity,id:this.props.id})},render:function(){if(this.props.empty)var e="calendar__day-empty";if(this.props.id)var e="calendar__day-active";var t=this.props.date?this.props.date.format("DD"):"";return a.DOM.div({className:"calendar__day "+(e||""),onClick:this.onClick},t)}}),i=a.createClass({displayName:"Week",render:function(){var e=this.props.afterHeader;return a.DOM.div({className:"calendar__week "+(e?"calendar__week--after-header":"")},a.DOM.div({className:"calendar__weeks-items"},this.props.children))}}),o=a.createClass({displayName:"Fold",getWeek:function(){for(var e=[],t=1;8>t;t++){e.push(s({empty:!0}))}return e},render:function(){return a.DOM.div({className:"calendar__fold"},a.DOM.div({className:"calendar__fold-item"},a.DOM.div({className:"calendar__fold-side calendar__fold-top calendar__weeks-items"},this.getWeek()),a.DOM.div({className:"calendar__fold-side calendar__fold-bottom calendar__weeks-items"},this.getWeek())))}})},{moment:"iROhDJ",react:"M6d2gk","react-router":"JvhVGi"}],3:[function(e,t){t.exports=function(e,t,a,n,r){return new Highcharts.Chart({chart:{renderTo:e,type:"column"},title:{text:""},tooltip:{headerFormat:"",animation:!1,formatter:function(){if("pace"===this.series.options.id)var e=Highcharts.dateFormat("%M:%S",this.y);else var e=this.y;return'<span style="color:'+this.series.color+'"><b>'+e+"</b><br/>"}},colors:["#7cb5ec"],credits:{enabled:!1},xAxis:{},yAxis:[{id:"hrAxis",type:"linear",title:{text:null},floor:n.min-30,ceiling:n.max+10,showEmpty:!1},{id:"paceAxis",title:{text:null},ceiling:r.max+4e3,type:"datetime",dateTimeLabelFormats:{minute:"%M:%S"},showEmpty:!1}],legend:{enabled:!1},plotOptions:{column:{pointPadding:null,groupPadding:null,borderWidth:1,borderColor:"white",allowPointSelect:!0,pointPlacement:"between",animation:!1},series:{cursor:"pointer",states:{select:{color:"hsl(209, 75%, 54%)",borderWidth:1,borderColor:"white"}},point:{events:{click:t,mouseOver:t,mouseOut:t}}}},series:[{id:"hr",data:n.values,yAxis:"hrAxis",visible:"hr"===a},{id:"pace",data:r.values,yAxis:"paceAxis",visible:"pace"===a}]})}},{}],4:[function(e,t){var a=e("react");t.exports=a.createClass({displayName:"data-picker",getDefaultProps:function(){return{value:"hr",onChange:function(){}}},render:function(){var e=this.props.value,t=this.props.onChange,n="chart__button data-picker__button";return a.DOM.div({className:"data-picker"},a.DOM.button({className:n,onClick:t.bind(null,"hr"),disabled:"hr"==e},"HR"),a.DOM.button({className:n,onClick:t.bind(null,"pace"),disabled:"pace"==e},"Pace"))}})},{react:"M6d2gk"}],5:[function(e,t){var a=e("react"),n=(e("moment"),e("./chart")),r=e("./range-picker"),s=e("./data-picker");t.exports=a.createClass({displayName:"chart",getDefaultProps:function(){return{data:{}}},getInitialState:function(){return{range:1e3,dataType:"hr",hrExtremes:{},paceExtremes:{},supportsTouch:"ontouchstart"in window}},shouldComponentUpdate:function(e,t){return this.state!==t},componentWillUnmount:function(){this.state.chart.destroy()},componentDidMount:function(){function e(e){var t=e.map(function(e){return e[1]});return{values:e,min:Math.min.apply(null,t),max:Math.max.apply(null,t)}}var t=this.state.dataType,a=e(this.groupData(this.props.data.getHR)),r=e(this.groupData(this.props.data.getPace));this.state.chart=n("chart",this.onSelectionChange,t,a,r),window.c=this.state.chart},groupData:function(e){for(var t=this.props.data,a=this.state.range,n=[],r=0;r<t.distance;r+=a){var s=t.getSegment([r,a]),i=e(s);n.push([r,i])}return n},showSelectedDataType:function(){var e=this.state.chart,t=this.props.data;if(e){var a=e.get("hr"),n=e.get("pace"),r="hr"===this.state.dataType;a.setVisible(r,!1),n.setVisible(!r,!1),a.setData(this.groupData(t.getHR),!1,!1,!1),n.setData(this.groupData(t.getPace),!0,!1,!1)}},onRangeChange:function(e){this.setState({range:e})},onDataTypeChange:function(e){this.setState({dataType:e})},onSelectionChange:function(e){var t=[];if("mouseOver"===e.type){if(this.state.supportsTouch)var t=[];t.push([e.target.x,this.state.range])}this.props.onSelectionChange(t)},render:function(){console.log("redraw"),this.showSelectedDataType();var e=this.props.className?[this.props.className]:[];return e.push("chart"),a.DOM.div({className:e.join(" ")},a.DOM.div({className:"chart__toolbar"},r({onChange:this.onRangeChange,value:this.state.range}),s({onChange:this.onDataTypeChange,value:this.state.dataType})),a.DOM.div({id:"chart"}))}})},{"./chart":3,"./data-picker":4,"./range-picker":6,moment:"iROhDJ",react:"M6d2gk"}],6:[function(e,t){var a=e("react");t.exports=a.createClass({displayName:"range-picker",getDefaultProps:function(){return{min:250,max:8e3,value:1e3,onChange:function(){}}},onMinus:function(){var e=this.props,t=e.value/2;e.onChange(t>e.min?t:e.min)},onPlus:function(){var e=this.props,t=2*e.value;e.onChange(t<e.max?t:e.max)},render:function(){var e=this.props,t="chart__button range-picker__button";return a.DOM.div({className:"range-picker"},a.DOM.button({onClick:this.onMinus,disabled:e.value===e.min,className:t},"-"),a.DOM.span({className:"range-picker__value"},this.props.value),a.DOM.button({onClick:this.onPlus,disabled:e.value===e.max,className:t},"+"))}})},{react:"M6d2gk"}],7:[function(e,t){var a=e("react"),n=e("leaflet");t.exports=a.createClass({displayName:"map",getDefaultProps:function(){return{data:{},selection:[]}},getInitialState:function(){return{map:null,route:n.polyline([],{}),selection:n.multiPolyline([],{color:"red"})}},componentWillMount:function(){var e=this.props.data;this.state.route.setLatLngs(e.getCoordinates(e.points,!0))},componentDidMount:function(){var e=this.state;e.map=n.map("map"),n.tileLayer("http://{s}.tiles.mapbox.com/v3/hendrikcech.i8m409e1/{z}/{x}/{y}.png",{maxZoom:18}).addTo(e.map),e.route.addTo(e.map),e.selection.addTo(e.map);var t=e.route.getBounds(),a=e.map.getBoundsZoom(e.route.getBounds(),!0);e.map.fitBounds(t,a)},selectSegment:function(){var e=this.props.selection,t=this.props.data;return 0===e.length?[]:e.map(function(e){var a=t.getSegment(e);return t.getCoordinates(a,!0)},this)},render:function(){var e=this.state;return e.selection.setLatLngs(this.selectSegment()),a.DOM.div({id:"map"})}})},{leaflet:"H1SEnJ",react:"M6d2gk"}],8:[function(e,t,a){var n=e("react"),r=e("moment");a.Panel=n.createClass({displayName:"user-panel",propTypes:{time:n.PropTypes.string,avatar:n.PropTypes.string.isRequired,name:n.PropTypes.string.isRequired},render:function(){var e=this.props,t=this.props.className?[this.props.className]:[];t.push("user-panel");var a=e.time?r(e.time).format("DD.MM.YYYY"):"";return n.DOM.div({className:t.join(" ")},n.DOM.div({className:"user-panel__top"},n.DOM.div({className:"user-panel__avatar"},n.DOM.img({className:"user-panel__avatar-img",src:e.avatar,height:100,width:100})),n.DOM.div({className:"user-panel__list"},n.DOM.h1({className:"user-panel__name"},e.name),n.DOM.span(null,a))),n.DOM.div({className:"user-panel__bottom"},this.props.children))}}),a.Item=n.createClass({displayName:"user-panel-item",propTypes:{key:n.PropTypes.string.isRequired,value:n.PropTypes.any.isRequired},render:function(){return n.DOM.div({className:"user-panel__item"},n.DOM.span({className:"user-panel__item-value"},this.props.value),n.DOM.span({className:"user-panel__item-label"},this.props.key))}})},{moment:"iROhDJ",react:"M6d2gk"}],9:[function(e,t){function a(e){var t=e.toString().split(".")[0];return t.length<2?"0"+t:t}function n(e){var t=e.toString();return-1===t.indexOf(".")?t+".00":t.split(".")[1].length<2?t+"0":t}var r=e("react"),s=e("moment"),i=e("../../data/run"),o=e("../../components/user-panel"),c=o.Panel,p=o.Item,l=e("../../components/chart"),u=e("../../components/map");t.exports=r.createClass({displayName:"run",propTypes:{getRun:r.PropTypes.func.isRequired,getProfile:r.PropTypes.func.isRequired,params:r.PropTypes.shape({entity:r.PropTypes.string,id:r.PropTypes.string}).isRequired},getInitialState:function(){return{selection:[]}},changeSelection:function(e){this.setState({selection:e})},render:function(){var e=this.props.params,t=this.props.getRun(e.entity,e.id),o=new i(t),d=this.props.getProfile(e.entity),h=n(Math.round(o.distance/1e3*100)/100),m=s.duration(o.duration,"milliseconds"),f=s.duration(o.pace.avg,"milliseconds"),g=Math.round(o.hr.avg);return r.DOM.div(null,c({className:"panel",avatar:d.avatar,name:o.name,time:o.startTime},p({key:"Distance",value:h}),p({key:"Duration",value:a(m.asMinutes())+":"+a(m.seconds())}),p({key:"Pace",value:a(f.minutes())+":"+a(f.seconds())}),p({key:"Heart Rate",value:g})),u({className:"panel",data:o,selection:this.state.selection}),l({className:"panel",data:o,onSelectionChange:this.changeSelection}))}})},{"../../components/chart":5,"../../components/map":7,"../../components/user-panel":8,"../../data/run":"FIx1u4",moment:"iROhDJ",react:"M6d2gk"}],10:[function(e,t){var a=e("react"),n=e("../../components/user-panel"),r=e("../../data/run"),s=n.Panel,i=n.Item,o=e("../../components/calendar");t.exports=a.createClass({displayName:"user",propTypes:{getProfile:a.PropTypes.func.isRequired,getRuns:a.PropTypes.func.isRequired,params:a.PropTypes.shape({entity:a.PropTypes.string,id:a.PropTypes.string}).isRequired},render:function(){var e=this.props.params,t=this.props.getRuns(e.entity);for(var n in t)t[n]=new r(t[n]);var c=this.props.getProfile(e.entity),p=Object.keys(t).reduce(function(e,a){return e+t[a].distance},0);return a.DOM.div(null,s({className:"panel",avatar:c.avatar,name:c.name},i({key:"Runs",value:Object.keys(t).length}),i({key:"Distance",value:Math.round(p/10)/100})),o({className:"panel",data:t,entity:e.entity}))}})},{"../../components/calendar":2,"../../components/user-panel":8,"../../data/run":"FIx1u4",react:"M6d2gk"}],11:[function(e,t){t.exports={name:"Hendrik Cech",bio:"hendrik.cech@gmail.com",location:"Braunschweig, Germany",website:"https://github.com/hendrikcech",avatar:"https://hendrik.cupcake.is/tent/attachments/https%3A%2F%2Fhendrik.cupcake.is/sha512t256-6d7e6236019da814094a67d4ea65d222b4f16b08aa1eadb893c999d1c3de8d17?bewit=Q3p3bWFTa1hRRFdKamJBTXNQUS1jUVw0NTMwNjY5NDYwXDhQUitjQklnbDdNNm9NcW5YSzFXNHFIdTgxSlJvZEl4UTJXWDhHZWU5c3c9XA"}},{}]},{},[1]);